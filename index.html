<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>수학 방탈출 ver2</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(45deg, #4a90e2, #9b59b6);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }

        .container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .input-box {
            background: white;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-size: 20px;
            cursor: pointer;
            min-height: 60px;
        }

        .button {
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 15px;
            width: 100%;
            font-size: 18px;
            cursor: pointer;
        }

        .keypad {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: none;
        }

        .keypad-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }

        .keypad-grid.numbers {
            grid-template-columns: repeat(5, 1fr);
        }

        .keypad-button {
            background: #f0f0f0;
            border: none;
            border-radius: 4px;
            padding: 15px;
            font-size: 18px;
            cursor: pointer;
        }

        .keypad-button:active {
            background: #e0e0e0;
        }

        .hint-text {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-size: 18px;
            line-height: 1.5;
        }

        .answer-section {
            text-align: center;
            margin-top: 30px;
        }

        .answer-button {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
        }

        .answer-line {
            width: 100%;
            height: 2px;
            background: #ccc;
            margin-top: 10px;
        }

        .answer-box {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            display: none;
            font-size: 18px;
        }

        .backspace {
            background: #ff9999;
            color: white;
        }

        .clear {
            background: #ff4444;
            color: white;
        }
    </style>
</head>
<body>
    <div class="header">수학방탈출</div>
    
    <div class="container" id="codeScreen">
        <div class="input-box" id="codeInput">힌트 코드를 입력하세요</div>
        <button class="button" id="submitCode">완료</button>
    </div>

    <div class="container" id="hintScreen" style="display: none;">
        <div class="hint-text" id="hintText">
            힌트 내용이 여기에 표시됩니다.
        </div>
        <div class="answer-section">
            <button class="answer-button" id="showAnswer">
                정답확인
                <div class="answer-line"></div>
            </button>
            <div class="answer-box" id="answerBox"></div>
        </div>
    </div>

    <div class="keypad" id="keypad">
        <div class="keypad-grid numbers" id="numberPad">
            <!-- 숫자 키패드는 JavaScript로 생성됩니다 -->
        </div>
        <div class="keypad-grid" id="letterPad">
            <!-- 알파벳 키패드는 JavaScript로 생성됩니다 -->
        </div>
    </div>

    <script>
        // 필요한 요소들 가져오기
        const codeScreen = document.getElementById('codeScreen');
        const hintScreen = document.getElementById('hintScreen');
        const codeInput = document.getElementById('codeInput');
        const keypad = document.getElementById('keypad');
        const numberPad = document.getElementById('numberPad');
        const letterPad = document.getElementById('letterPad');
        const submitCode = document.getElementById('submitCode');
        const showAnswer = document.getElementById('showAnswer');
        const answerBox = document.getElementById('answerBox');
        const hintText = document.getElementById('hintText');

        // 현재 입력된 코드
        let currentCode = '';

        // 힌트 코드와 해당하는 힌트/정답
        const hints = {
            '1234a': {
                hint: '첫 번째 문제의 힌트입니다.\n이 힌트를 잘 읽고 문제를 해결하세요.',
                answer: 'test1'
            },
            '2345b': {
                hint: '두 번째 문제의 힌트입니다.\n이 힌트를 잘 읽고 문제를 해결하세요.',
                answer: 'test2'
            },
            '3456c': {
                hint: '세 번째 문제의 힌트입니다.\n이 힌트를 잘 읽고 문제를 해결하세요.',
                answer: 'test3'
            }
        };

        // 숫자 키패드 생성
        for (let i = 1; i <= 9; i++) {
            const button = document.createElement('button');
            button.className = 'keypad-button';
            button.textContent = i;
            button.onclick = () => addToCode(i);
            numberPad.appendChild(button);
        }
        const button0 = document.createElement('button');
        button0.className = 'keypad-button';
        button0.textContent = '0';
        button0.onclick = () => addToCode('0');
        numberPad.appendChild(button0);

        // 백스페이스와 클리어 버튼 추가
        const backspace = document.createElement('button');
        backspace.className = 'keypad-button backspace';
        backspace.textContent = '←';
        backspace.onclick = () => {
            currentCode = currentCode.slice(0, -1);
            updateDisplay();
        };
        numberPad.appendChild(backspace);

        // 알파벳 키패드 생성
        'abcdefghijklmnopqrstuvwxyz'.split('').forEach(letter => {
            const button = document.createElement('button');
            button.className = 'keypad-button';
            button.textContent = letter;
            button.onclick = () => addToCode(letter);
            letterPad.appendChild(button);
        });

        // 코드 입력창 클릭 시 키패드 표시
        codeInput.onclick = () => {
            keypad.style.display = 'block';
        };

        // 화면 클릭 시 키패드 숨기기 (입력창 제외)
        document.addEventListener('click', (e) => {
            if (!keypad.contains(e.target) && e.target !== codeInput) {
                keypad.style.display = 'none';
            }
        });

        // 코드에 문자 추가
        function addToCode(char) {
            if (currentCode.length < 5) {
                currentCode += char;
                updateDisplay();
            }
        }

        // 디스플레이 업데이트
        function updateDisplay() {
            codeInput.textContent = currentCode || '힌트 코드를 입력하세요';
        }

        // 완료 버튼 클릭 시
        submitCode.onclick = () => {
            if (hints[currentCode]) {
                codeScreen.style.display = 'none';
                hintScreen.style.display = 'block';
                keypad.style.display = 'none';
                hintText.textContent = hints[currentCode].hint;
                answerBox.textContent = hints[currentCode].answer;
            } else {
                alert('올바른 힌트 코드를 입력해주세요!');
            }
        };

        // 정답 확인 버튼 클릭 시
        showAnswer.onclick = () => {
            answerBox.style.display = answerBox.style.display === 'none' ? 'block' : 'none';
        };
    </script>
</body>
</html>
